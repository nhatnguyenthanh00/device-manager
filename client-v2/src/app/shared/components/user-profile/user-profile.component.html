<div class="profile-container">
  <!-- Profile Information -->
  <div class="profile-info">
    <div class="info-row">
      <div class="info-item">
        <label>Username:</label>
        <span>{{ userProfile?.username }}</span>
      </div>
      <div class="info-item">
        <label>Name:</label>
        <span>{{ userProfile?.name }}</span>
      </div>
    </div>

    <div class="info-row">
      <div class="info-item">
        <label>Gender:</label>
        <span>{{ userProfile?.gender }}</span>
      </div>
      <div class="info-item">
        <label>Total Devices:</label>
        <span>{{ userProfile?.totalDevice }}</span>
      </div>
    </div>
  </div>

  <!-- Password Change Form -->

  <div class="change-password-container">
    <h2>Change Password</h2>
    <form [formGroup]="changePasswordForm" (submit)="changePassword()">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Old Password</mat-label>
        <input
          matInput
          [type]="showPassword ? 'text' : 'password'"
          formControlName="oldPassword"
        />
        <mat-icon matSuffix (click)="togglePasswordVisibility()">
          {{ showPassword ? 'visibility_off' : 'visibility' }}
        </mat-icon>
        <mat-error *ngIf="changePasswordForm.controls['oldPassword'].hasError('required')">
          Old password is required.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>New Password</mat-label>
        <input matInput [type]="showNewPassword ? 'text' : 'password'" formControlName="newPassword" />
        <mat-icon matSuffix (click)="toggleNewPasswordVisibility()">
          {{ showNewPassword ? 'visibility_off' : 'visibility' }}
        </mat-icon>
        <mat-error *ngIf="changePasswordForm.controls['newPassword'].hasError('required')">
          New password is required.
        </mat-error>
        <mat-error *ngIf="changePasswordForm.controls['newPassword'].hasError('minlength')">
          Must be at least 8 characters.
        </mat-error>
        <mat-error *ngIf="changePasswordForm.controls['newPassword'].hasError('pattern')">
          Password must contain uppercase, lowercase, number, and special character.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
      <mat-label>Confirm Password</mat-label>
      <input matInput [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword" />
      <mat-icon matSuffix (click)="toggleConfirmPasswordVisibility()">
        {{ showConfirmPassword ? 'visibility_off' : 'visibility' }}
      </mat-icon>
      <mat-error *ngIf="changePasswordForm.controls['confirmPassword'].hasError('required')">
        Confirm password is required.
      </mat-error>
      <mat-error *ngIf="changePasswordForm.controls['confirmPassword'].hasError('mismatch')">
        Password do not match!
      </mat-error>
    </mat-form-field>

      <button class="change-password-btn" type="submit" [ngClass]="changePasswordForm.invalid ? 'disabled' : ''">Change password</button>
    </form>
  </div>
</div>
